<style>

  
  div#search_results {
    margin-left: 240px;
  }
  div#search_results .result:after{ content: '.'; display: block; height: 0; clear: both; visibility: hidden; }
  div#search_results .icon_wrapper {
    float: right;
    margin-top: 20px;
    width: 50px;
  }
  div#search_results .icon_wrapper img {
    height: 30px;
    padding: 2px;
  }
  
  /* Normalize Search Results */
  div#search_results .result .photo_wrapper {
    margin-bottom: 0;
  }

  div#search_results .result .photo_wrapper img.photo {
    height: 50px;
    width: 50px;
  }
  
  div#search_results .result .group_item {
    clear: none;
  }
  
  div#search_results .result #list {
    border-top: 0;
    padding: 0;
    position: static;
  }
  
  div#search_results .result .action_list, div#search_results .result .action_buttons, div#search_results .result .rate, div#search_results .result .referred {
    display: none;
  }
  
  
  div#search_filter {
    float: left;
    width: 239px;
  }
  div#search_filter .accordionButton {
    background: #C4D7DC;
    border-bottom: 1px solid #fff;
    padding: 10px;
  }
  
  div#search_filter .accordionButton.active {
    background: #4a6970;
  }
  
  div#search_filter .accordionButton a {
    color: white;
    display: block;
    font-size: 16px;
    font-weight: normal;
    text-transform: lowercase;
  }
  
</style>

<h2 class="page_title">Search Results: <%= h @query %></h2>


<div id="search_filter">
  <% @filters.keys.sort.each do |key| %>
    <div class="accordionButton <%= "active" if key == params[:scope] || (key == "all" && params[:scope].blank?) %>">
      <%= link_to @filters[key], { :scope => key, :q => @query } %>
    </div>
  <% end %>
</div>

<div id="search_results">
  <div id="list">
    <h2><%= "#{@filters[params[:scope]]}: "unless params[:scope].blank? %><%= pluralize @results.size, "Result" %></h2>
    <% if @results.empty? %>
      No Results Found
    <% else %>
        <% @results.results.each do |result| %>
          <% html = "" %>
          <% icon = "" %>
          <% case result.class.to_s
              when "BlogPost"
                icon = icon_image(:path => blog_icon_path)
                html = render :partial => '/blog_posts/blog_post', :locals => { :blog_post => result, :blog_explore => true }
              when "Group"
                icon = icon_image(:path => group_icon_path)
                html = render :partial => '/groups/group', :locals => { :group => result }
              when "Profile"
                icon = icon_image(:path => profile_icon_path)
                html = render :partial => "/profiles/search", :locals => { :profile => result }
              when "Question"
                icon = icon_image(:path => qa_icon_path)          
                html = render :partial =>'/questions/question', :locals => {:questions_for => nil, :domain => '', :questions_counter => 1, :question => result, :show => nil, :model => ''}
              when "Status"
                icon = icon_image(:path => status_icon_path)
                html = render :partial => "/statuses/status", :locals => { :status => result }
            end %>
    
          <% unless html.blank? %>
            <div class="result_container">
              <div class="icon_wrapper">
                <%= icon %>
              </div>
              <div class="result">
                <%= html %>
              </div>
            </div>
          <% end %>
        <% end %>

        <%= render_pagination @results, :page_var => :search_page %>
    <% end %>
  </div>
</div>